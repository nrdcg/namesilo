// Code generated by gen/gen_test.go DO NOT EDIT.

package namesilo

import (
	"context"
	"encoding/xml"
	"fmt"
	"io"
	"net/http"
)
{{range $key, $value := .Names }}
// {{ $value.Upper }} Execute operation {{ $value.Lower }}.
func (c *Client) {{ $value.Upper }}(ctx context.Context, params *{{ $value.Upper }}Params) (*{{ $value.Upper }}, error) {
	resp, err := c.get(ctx, "{{ $value.Lower }}", params)
	if err != nil {
		return nil, err
	}

	defer func() { _ = resp.Body.Close() }()

	if resp.StatusCode != http.StatusOK {
		return nil, fmt.Errorf("error: HTTP status code %v", resp.StatusCode)
	}

	bytes, err := io.ReadAll(resp.Body)
	if err != nil {
		return nil, err
	}

	op := &{{ $value.Upper }}{}

	err = xml.Unmarshal(bytes, op)
	if err != nil {
		return nil, fmt.Errorf("failed to decode: %w: %s", err, bytes)
	}

	switch op.Reply.Code {
	case SuccessfulAPIOperation:
		// Successful API operation
		return op, nil
	case SuccessfulRegistration:
		// Successful registration, but not all provided hosts were valid resulting in our nameservers being used
		return op, nil
	case SuccessfulOrder:
		// Successful order, but there was an error with the contact information provided so your account default contact profile was used
		return op, nil
	default:
		// error
		return op, fmt.Errorf("code: %s, details: %s", op.Reply.Code, op.Reply.Detail)
	}
}
{{end}}
